!function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){e.exports=jQuery},function(e,t,n){e.exports=n(3)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(2);var r=n(0),u=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.SHOW_CLASS="is-shown",this.ERROR_CLASS="is-error",this.WARNING_CLASS="is-warning",this.DISABLED_CLASS="is-disabled",this.IS_RAW_CLASS="is-raw",this.reportItemHeading=e.reportItemHeading,this.reportReportTable=e.reportReportTable,this.reportNoticeType=e.reportNoticeType,this.reportItemLine=e.reportItemLine,this.reportItemType=e.reportItemType,this.reportItemMessage=e.reportItemMessage,this.$sniffReport=e.sniffReport,this.$snifferInfo=e.snifferInfo,this.$checkNotice=e.checkNotice,this.$startNotice=e.startNotice,this.$reportItem=e.reportItem,this.$loader=e.loader,this.$startButton=u()(e.startButton),this.$stopButton=u()(e.stopButton),this.nonce=e.nonce,this.runAction=e.runAction,this.ajaxRequest=[],this.ajaxAllow=!0,this.renderJSON=this.renderJSON.bind(this),this.showNotices=this.showNotices.bind(this),this.hideNotices=this.hideNotices.bind(this)}var e,n,r;return e=t,(n=[{key:"enableAjax",value:function(){this.ajaxAllow=!0,this.$snifferInfo.removeClass(this.SHOW_CLASS)}},{key:"preventAjax",value:function(){this.ajaxAllow=!1,this.$startButton.removeClass(this.DISABLED_CLASS),this.$stopButton.addClass(this.DISABLED_CLASS),this.$loader.removeClass(this.SHOW_CLASS),this.$startNotice.html(themeSnifferLocalization.ajaxAborted).addClass(this.SHOW_CLASS),u.a.each(this.ajaxRequest,function(e,t){t.abort([themeSnifferLocalization.ajaxAborted])})}},{key:"renderRaw",value:function(e,t){t.append(e)}},{key:"renderJSON",value:function(e){var t,s=this,n=(t=this.$reportItem.clone().addClass(this.SHOW_CLASS)).find(this.reportItemHeading),a=t.find(this.reportReportTable),c=t.find(this.reportNoticeType);return n.text(e.filePath.split("/themes/")[1]),u.a.each(e.messages,function(e,t){var n=t.line||0,r=t.message,i=t.type,o=c.clone().addClass(i.toLowerCase());o.find(s.reportItemLine).text(n),o.find(s.reportItemType).text(i),r.includes("iframe")?o.find(s.reportItemMessage).text(r):o.find(s.reportItemMessage).html(r),o.appendTo(a)}),c.remove(),t}},{key:"showNotices",value:function(e){this.$startNotice.html(e).addClass(this.SHOW_CLASS),this.$checkNotice.removeClass(this.SHOW_CLASS),this.$loader.addClass(this.SHOW_CLASS),this.$startButton.addClass(this.DISABLED_CLASS),this.$stopButton.removeClass(this.DISABLED_CLASS)}},{key:"hideNotices",value:function(e,t){this.$startNotice.html(e).addClass(this.SHOW_CLASS),this.$loader.removeClass(this.SHOW_CLASS),this.$stopButton.addClass(this.DISABLED_CLASS),this.$startButton.removeClass(this.DISABLED_CLASS),t&&this.$checkNotice.addClass(this.SHOW_CLASS)}},{key:"themeCheckRunPHPCS",value:function(e,t,n,r,i,o,s,a){var c,h,f,l=this,p={themeName:e,hideWarning:t,rawOutput:n,ignoreAnnotations:r,checkPhpOnly:i,minimumPHPVersion:o,wpRulesets:s,themePrefixes:a,action:this.runAction,nonce:this.nonce};return!!this.ajaxAllow&&(c={type:"POST",url:ajaxurl,data:p,beforeSend:function(e){l.showNotices(themeSnifferLocalization.checkInProgress),n||l.$sniffReport.removeClass(l.IS_RAW_CLASS),l.$sniffReport.empty(),l.$snifferInfo.empty(),l.ajaxRequest.push(e)}},u.a.ajax(c).done(h).fail(f)).then(function(e){if(!0===e.success){if(l.$startNotice.removeClass(l.SHOW_CLASS),n){l.hideNotices(themeSnifferLocalization.checkCompleted,!0);var t=l.$sniffReport.addClass(l.IS_RAW_CLASS);return void l.renderRaw(e.data,t)}u.a.each(e.files,function(e,t){l.$sniffReport.append(l.renderJSON(t))}),l.hideNotices(themeSnifferLocalization.checkCompleted,!0)}else l.hideNotices(themeSnifferLocalization.errorReport,!1),l.$snifferInfo.addClass(l.SHOW_CLASS).addClass(l.ERROR_CLASS).text(e.data[0].message)},function(e,t,n){throw new Error("Error: ".concat(n,": ").concat(e," ").concat(t))})}}])&&i(e.prototype,n),r&&i(e,r),t}();u()(function(){var e={sniffReport:u()(".js-sniff-report"),snifferInfo:u()(".js-sniffer-info"),checkNotice:u()(".js-check-done"),startNotice:u()(".js-start-notice"),reportItem:u()(".js-report-item"),loader:u()(".js-loader"),startButton:".js-start-check",stopButton:".js-stop-check",reportItemHeading:".js-report-item-heading",reportReportTable:".js-report-table",reportNoticeType:".js-report-notice-type",reportItemLine:".js-report-item-line",reportItemType:".js-report-item-type",reportItemMessage:".js-report-item-message",runAction:"run_sniffer",nonce:u()("#theme-sniffer_nonce").val()},c=new o(e);u()(e.startButton).on("click",function(){var e=u()("select[name=themename]").val(),t=u()("input[name=hide_warning]").is(":checked"),n=u()("input[name=raw_output]").is(":checked"),r=u()("input[name=ignore_annotations]").is(":checked"),i=u()("input[name=check_php_only]").is(":checked"),o=u()("select[name=minimum_php_version]").val(),s=u()("input[name=theme_prefixes]").val(),a=u()('input[name="selected_ruleset[]"]:checked').map(function(e,t){return t.value}).toArray();c.enableAjax(),c.themeCheckRunPHPCS(e,t,n,r,i,o,a,s)}),u()(e.stopButton).on("click",function(){return c.preventAjax()}),u()('select[name="themename"]').on("change",function(){e.startNotice.html().length&&(c.preventAjax(),e.sniffReport.length&&e.sniffReport.empty())})})}]);